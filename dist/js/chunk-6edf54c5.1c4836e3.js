(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6edf54c5"],{1203:function(t,e,s){},1929:function(t,e,s){},"1cc3":function(t,e,s){"use strict";s("1203")},"2cb0":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"headline"},[s("div",{staticClass:"back",on:{click:t.backto}},[s("i",{staticClass:"iconfont icon-huitui"})]),s("div",{staticClass:"title"},[t._t("default")],2)])},i=[],o={methods:{backto:function(){this.$router.back()}}},a=o,r=(s("be5e"),s("2877")),c=Object(r["a"])(a,n,i,!1,null,"11bce994",null);e["a"]=c.exports},"2d3b":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[s("head-line",[t._v("搜索")]),s("form",{staticClass:"searchfrom",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.search(e)}}},[s("div",{staticClass:"search_input"},[s("div",{staticClass:"searchIcon iconfont icon-sousuo",on:{click:t.search}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.keywords,expression:"keywords"}],attrs:{type:"text",placeholder:"那英    从前那个少年"},domProps:{value:t.keywords},on:{input:[function(e){e.target.composing||(t.keywords=e.target.value)},t.inputIng]}}),s("i",{directives:[{name:"show",rawName:"v-show",value:t.isDel,expression:"isDel"}],staticClass:"iconfont icon-shanchu icon",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.del(e)}}})])]),s(t.showcomponent,{tag:"component",attrs:{keywords:t.keywords,musicObj:t.musicObj},on:{search:t.search,play:function(e){return t.$emit("play",e)}}})],1)},i=[],o=(s("498a"),s("2cb0")),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search_result"},[s("p",[t._v("搜索结果: "+t._s(t.keywords))]),s("p",[t._v("最佳匹配")]),s("div",{staticClass:"album"},[s("div",{staticClass:"left"},[s("img",{attrs:{src:t.matchAlbum.picUrl,alt:""}}),s("ul",[s("li",[t._v("专辑："+t._s(t.matchAlbum.name))]),s("li",[t._v(t._s(t.singerName))])])]),t._m(0)]),t.searchResult?s("ul",t._l(t.searchResult,(function(e,n){return s("music-list",{key:n,attrs:{item:e,keywords:t.keywords,musicObj:t.musicObj},on:{play:function(e){return t.$emit("play",e)}}})})),1):t._e(),s("loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]})],1)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"right"},[s("button",[s("i",{staticClass:"iconfont icon-bofang"}),t._v("播放")])])}],c=(s("d81d"),s("99af"),s("b0c0"),s("3a5e")),u=s("f382"),l={components:{MusicList:u["a"],Loading:c["a"]},props:{keywords:String,musicObj:[Object,null]},created:function(){this.getResult(),this.getAlbum(),window.addEventListener("scroll",this.onScroll)},data:function(){return{searchResult:[],page:0,perpage:20,isLoading:!0,matchAlbum:{},singerName:""}},methods:{getResult:function(){var t=this;this.axios.get("/search",{params:{keywords:this.keywords,limit:this.perpage,offset:this.page*this.perpage}}).then((function(e){if(!(e.data.result.songs.length<=0)){var s=e.data.result.songs.map((function(t){return t.song={artists:t.artists,album:t.album},t}));t.isLoading=!1,t.searchResult=t.searchResult.concat(s)}}))},getAlbum:function(){var t=this;this.axios.get("/search",{params:{keywords:this.keywords,limit:1,type:10}}).then((function(e){!e.data&&e.data.result&&e.data.result.albums&&e.data.result.albums.artists||(t.matchAlbum=e.data.result.albums[0],t.singerName=t.matchAlbum.artists[0].name)}))},onScroll:function(){var t=document.documentElement.scrollHeight,e=document.documentElement.scrollTop,s=document.documentElement.clientHeight;t-10-e-s<0&&(this.isLoading=!0,this.page++,this.getResult())}},beforeRouteLeave:function(t,e,s){window.removeEventListener("scroll",this.onScroll),s()}},h=l,d=(s("4294"),s("2877")),f=Object(d["a"])(h,a,r,!1,null,"6221d374",null),m=f.exports,p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search_suggest"},[s("p",[t._v("搜索提示")]),s("ul",{staticClass:"mes"},[t._l(t.suggestList,(function(e){return s("li",{key:e.id,on:{click:function(s){return s.stopPropagation(),t.$emit("search",{keywords:e.name})}}},[s("i",{staticClass:"iconfont icon-sousuo"}),s("span",[t._v(t._s(e.name))])])})),s("li",{directives:[{name:"show",rawName:"v-show",value:t.suggestList.length<=0,expression:"suggestList.length<=0"}]},[t._v("暂无结果")])],2)])},g=[],v={props:{keywords:String},data:function(){return{suggestList:[]}},created:function(){this.initiationRequest(this.keywords)},watch:{keywords:function(t){this.initiationRequest(t)}},methods:{initiationRequest:function(t){var e=this;this.axios.get("/search/suggest?keywords="+t).then((function(t){t.data.result&&t.data.result.songs&&(e.suggestList=t.data.result.songs)}))}}},w=v,b=(s("d532"),Object(d["a"])(w,p,g,!1,null,"bfc0a4f6",null)),k=b.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search_hot_component"},[s("p",[t._v("搜索热词")]),s("ul",{staticClass:"hot_words"},t._l(t.hotSearch,(function(e,n){return s("li",{key:n,on:{click:function(s){return s.stopPropagation(),t.$emit("search",{keywords:e.first})}}},[t._v(t._s(e.first))])})),0)])},_=[],C={data:function(){return{hotSearch:[]}},created:function(){var t=this;this.axios("/search/hot").then((function(e){t.hotSearch=e.data.result.hots}))}},x=C,L=(s("de87"),Object(d["a"])(x,y,_,!1,null,"10e0660d",null)),S=L.exports,R={name:"Search",props:["musicObj"],components:{HeadLine:o["a"],SearchResult:m,SearchSuggest:k,SearchHotComponent:S},data:function(){return{showcomponent:S,keywords:"",isDel:!1}},methods:{search:function(t){t.keywords&&(this.keywords=t.keywords,this.isDel=!0),""==this.keywords.trim()||this.keywords.length<=0?(this.showcomponent=S,this.isDel=!1):(this.showcomponent=m,this.isDel=!0)},inputIng:function(){""==this.keywords.trim()||this.keywords.length<=0?(this.showcomponent=S,this.isDel=!1):(this.showcomponent=k,this.isDel=!0)},del:function(){this.keywords="",this.showcomponent=S}}},E=R,j=(s("1cc3"),Object(d["a"])(E,n,i,!1,null,"bdfe66e4",null));e["default"]=j.exports},4294:function(t,e,s){"use strict";s("b0d5")},"498a":function(t,e,s){"use strict";var n=s("23e7"),i=s("58a8").trim,o=s("c8d2");n({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var n=s("1d80"),i=s("5899"),o="["+i+"]",a=RegExp("^"+o+o+"*"),r=RegExp(o+o+"*$"),c=function(t){return function(e){var s=String(n(e));return 1&t&&(s=s.replace(a,"")),2&t&&(s=s.replace(r,"")),s}};t.exports={start:c(1),end:c(2),trim:c(3)}},"60cf":function(t,e,s){},"881a":function(t,e,s){},b0c0:function(t,e,s){var n=s("83ab"),i=s("9bf2").f,o=Function.prototype,a=o.toString,r=/^\s*function ([^ (]*)/,c="name";n&&!(c in o)&&i(o,c,{configurable:!0,get:function(){try{return a.call(this).match(r)[1]}catch(t){return""}}})},b0d5:function(t,e,s){},be5e:function(t,e,s){"use strict";s("60cf")},c8d2:function(t,e,s){var n=s("d039"),i=s("5899"),o="​᠎";t.exports=function(t){return n((function(){return!!i[t]()||o[t]()!=o||i[t].name!==t}))}},d532:function(t,e,s){"use strict";s("881a")},de87:function(t,e,s){"use strict";s("1929")}}]);
//# sourceMappingURL=chunk-6edf54c5.1c4836e3.js.map